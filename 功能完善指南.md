# é‡ç™¾çµé¤å…ç®¡ç†ç³»ç»Ÿ - åŠŸèƒ½å®Œå–„æŒ‡å—

æœ¬æ–‡æ¡£æä¾›äº†ç³»ç»Ÿæ‰€æœ‰å¾…å®Œå–„åŠŸèƒ½çš„è¯¦ç»†å®ç°æ–¹æ¡ˆå’Œä»£ç ç¤ºä¾‹ã€‚

---

## âœ… å·²å®ŒæˆåŠŸèƒ½ï¼ˆå¯ç«‹å³ä½¿ç”¨ï¼‰

### 1. ç™»å½•è®¤è¯ç³»ç»Ÿ
- **æ–‡ä»¶**ï¼š`login.html`, `auth.js`
- **åŠŸèƒ½**ï¼šç™»å½•éªŒè¯ã€ä¼šè¯ç®¡ç†ã€è‡ªåŠ¨è·³è½¬
- **é»˜è®¤è´¦å·**ï¼šadmin / admin123

### 2. æ•°æ®å¤‡ä»½ç³»ç»Ÿ
- **æ–‡ä»¶**ï¼š`backup.html`
- **åŠŸèƒ½**ï¼šå¯¼å‡º/å¯¼å…¥æ•°æ®ã€æ¸…ç©ºæ•°æ®ã€æ•°æ®ç»Ÿè®¡

### 3. é—¨åº—ç®¡ç†
- **æ–‡ä»¶**ï¼š`stores.html`
- **åŠŸèƒ½**ï¼šæ·»åŠ é—¨åº—ã€ç®¡ç†æ¡Œå·ã€ç”ŸæˆäºŒç»´ç 

### 4. é—®å·ç¼–è¾‘å™¨
- **æ–‡ä»¶**ï¼š`questionnaire-editor.html`
- **åŠŸèƒ½**ï¼šç¼–è¾‘é—®é¢˜ã€è‡ªå®šä¹‰æ ·å¼

### 5. æ•°æ®ç»Ÿè®¡
- **æ–‡ä»¶**ï¼š`data.html`
- **åŠŸèƒ½**ï¼šæŸ¥çœ‹åé¦ˆã€ç­›é€‰ã€å¯¼å‡ºCSV

### 6. é¡¾å®¢åé¦ˆ
- **æ–‡ä»¶**ï¼š`feedbacks.html`
- **åŠŸèƒ½**ï¼šåˆ†é¡µæŸ¥çœ‹åé¦ˆ

---

## ğŸ”§ å¾…å®Œå–„åŠŸèƒ½å®ç°æ–¹æ¡ˆ

### åŠŸèƒ½1ï¼šè®©é—®å·ç¼–è¾‘å™¨é…ç½®ç”Ÿæ•ˆåˆ°survey.html

**å®ç°æ€è·¯**ï¼š
ä¿®æ”¹ `survey.html`ï¼Œåœ¨é¡µé¢åŠ è½½æ—¶è¯»å– `localStorage` ä¸­çš„é…ç½®ï¼ŒåŠ¨æ€ç”Ÿæˆé—®é¢˜ã€‚

**å…³é”®ä»£ç **ï¼š
```javascript
// åœ¨ survey.html ä¸­æ·»åŠ 
window.addEventListener('load', () => {
    const config = localStorage.getItem('ybl_questionnaire_config');
    if (config) {
        const questionnaireConfig = JSON.parse(config);
        // åŠ¨æ€ç”Ÿæˆé—®é¢˜
        generateQuestions(questionnaireConfig.questions);
        // åº”ç”¨æ ·å¼
        applyStyles(questionnaireConfig.style);
    }
});

function generateQuestions(questions) {
    // æ ¹æ®é…ç½®åŠ¨æ€ç”Ÿæˆé—®é¢˜HTML
    const container = document.querySelector('.survey-container');
    questions.forEach((q, index) => {
        // ç”Ÿæˆå•é€‰/å¤šé€‰/æ˜Ÿçº§/æ–‡æœ¬é—®é¢˜
    });
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`survey.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š2-3å°æ—¶

---

### åŠŸèƒ½2ï¼šä¸ºfeedbacks.htmlæ·»åŠ åˆ é™¤å’Œç­›é€‰

**å®ç°æ€è·¯**ï¼š
ä¸ºæ¯æ¡åé¦ˆæ·»åŠ åˆ é™¤æŒ‰é’®ï¼Œæ·»åŠ ç­›é€‰å™¨ï¼ˆæŒ‰é—¨åº—ã€æŒ‰è¯„åˆ†ã€æŒ‰æ—¥æœŸï¼‰ã€‚

**å…³é”®ä»£ç **ï¼š
```javascript
// æ·»åŠ åˆ é™¤æŒ‰é’®
function generateFeedbackCard(feedback, index) {
    return `
        <div class="feedback-card">
            <!-- åŸæœ‰å†…å®¹ -->
            <button class="btn-delete" onclick="deleteFeedback(${index})">
                ğŸ—‘ï¸ åˆ é™¤
            </button>
        </div>
    `;
}

// åˆ é™¤åé¦ˆ
function deleteFeedback(index) {
    if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡åé¦ˆå—ï¼Ÿ')) return;

    const answers = JSON.parse(localStorage.getItem('ybl_answers') || '[]');
    answers.splice(index, 1);
    localStorage.setItem('ybl_answers', JSON.stringify(answers));
    loadFeedbacks();
}

// æ·»åŠ ç­›é€‰å™¨
function addFilters() {
    return `
        <div class="filter-bar">
            <select id="storeFilter" onchange="filterFeedbacks()">
                <option value="">å…¨éƒ¨é—¨åº—</option>
                <!-- åŠ¨æ€ç”Ÿæˆé—¨åº—é€‰é¡¹ -->
            </select>
            <select id="ratingFilter" onchange="filterFeedbacks()">
                <option value="">å…¨éƒ¨è¯„åˆ†</option>
                <option value="5">5æ˜Ÿ</option>
                <option value="4">4æ˜Ÿ</option>
                <!-- ... -->
            </select>
        </div>
    `;
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`feedbacks.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š1-2å°æ—¶

---

### åŠŸèƒ½3ï¼šä¸ºstores.htmlæ·»åŠ ç¼–è¾‘å’Œæ‰¹é‡æ·»åŠ 

**å®ç°æ€è·¯**ï¼š
ä¸ºé—¨åº—æ·»åŠ ç¼–è¾‘æŒ‰é’®ï¼Œæ·»åŠ æ‰¹é‡æ·»åŠ æ¡Œå·åŠŸèƒ½ï¼ˆå¦‚ï¼š1-50å·æ¡Œï¼‰ã€‚

**å…³é”®ä»£ç **ï¼š
```javascript
// ç¼–è¾‘é—¨åº—
function editStore(index) {
    const stores = JSON.parse(localStorage.getItem('ybl_stores') || '[]');
    const newName = prompt('ä¿®æ”¹é—¨åº—åç§°ï¼š', stores[index].name);
    if (newName) {
        stores[index].name = newName;
        localStorage.setItem('ybl_stores', JSON.stringify(stores));
        loadStores();
    }
}

// æ‰¹é‡æ·»åŠ æ¡Œå·
function batchAddTables(storeIndex) {
    const start = prompt('èµ·å§‹æ¡Œå·ï¼š', '1');
    const end = prompt('ç»“æŸæ¡Œå·ï¼š', '50');

    if (start && end) {
        const stores = JSON.parse(localStorage.getItem('ybl_stores') || '[]');
        for (let i = parseInt(start); i <= parseInt(end); i++) {
            stores[storeIndex].tables.push(String(i));
        }
        localStorage.setItem('ybl_stores', JSON.stringify(stores));
        loadStores();
    }
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`stores.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š1å°æ—¶

---

### åŠŸèƒ½4ï¼šæ·»åŠ æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼ˆChart.jsï¼‰

**å®ç°æ€è·¯**ï¼š
åœ¨ `data.html` ä¸­å¼•å…¥ Chart.jsï¼Œæ·»åŠ è¯„åˆ†åˆ†å¸ƒé¥¼å›¾ã€æ—¶é—´è¶‹åŠ¿å›¾ç­‰ã€‚

**å…³é”®ä»£ç **ï¼š
```html
<!-- å¼•å…¥Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="charts-container">
    <canvas id="ratingChart"></canvas>
    <canvas id="trendChart"></canvas>
</div>

<script>
// è¯„åˆ†åˆ†å¸ƒé¥¼å›¾
const ratingData = calculateRatingDistribution();
new Chart(document.getElementById('ratingChart'), {
    type: 'pie',
    data: {
        labels: ['5æ˜Ÿ', '4æ˜Ÿ', '3æ˜Ÿ', '2æ˜Ÿ', '1æ˜Ÿ'],
        datasets: [{
            data: ratingData,
            backgroundColor: ['#10b981', '#3b82f6', '#f59e0b', '#ef4444', '#dc2626']
        }]
    }
});

// æ—¶é—´è¶‹åŠ¿å›¾
const trendData = calculateTrend();
new Chart(document.getElementById('trendChart'), {
    type: 'line',
    data: {
        labels: trendData.dates,
        datasets: [{
            label: 'åé¦ˆæ•°é‡',
            data: trendData.counts,
            borderColor: '#3b82f6',
            tension: 0.4
        }]
    }
});
</script>
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`data.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š2-3å°æ—¶

---

### åŠŸèƒ½5ï¼šäºŒç»´ç æ‰¹é‡ä¸‹è½½

**å®ç°æ€è·¯**ï¼š
ä½¿ç”¨ JSZip åº“å°†æ‰€æœ‰äºŒç»´ç æ‰“åŒ…æˆZIPæ–‡ä»¶ä¸‹è½½ã€‚

**å…³é”®ä»£ç **ï¼š
```html
<!-- å¼•å…¥JSZip -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3/dist/jszip.min.js"></script>

<script>
async function batchDownloadQRCodes(storeIndex) {
    const zip = new JSZip();
    const stores = JSON.parse(localStorage.getItem('ybl_stores') || '[]');
    const store = stores[storeIndex];

    // ä¸ºæ¯ä¸ªæ¡Œå·ç”ŸæˆäºŒç»´ç å¹¶æ·»åŠ åˆ°ZIP
    for (const table of store.tables) {
        const qrCanvas = generateQRCodeCanvas(store.name, table);
        const blob = await canvasToBlob(qrCanvas);
        zip.file(`${store.name}_${table}.png`, blob);
    }

    // ä¸‹è½½ZIP
    const content = await zip.generateAsync({type: 'blob'});
    downloadBlob(content, `${store.name}_äºŒç»´ç .zip`);
}
</script>
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`stores.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š1-2å°æ—¶

---

### åŠŸèƒ½6ï¼šåˆ›å»ºç³»ç»Ÿè®¾ç½®é¡µé¢

**å®ç°æ€è·¯**ï¼š
åˆ›å»º `settings.html`ï¼Œç»Ÿä¸€ç®¡ç†å…¨å±€é…ç½®ã€‚

**é¡µé¢å†…å®¹**ï¼š
- åŸºç¡€è®¾ç½®ï¼ˆé¤å…åç§°ã€logoï¼‰
- é—®å·è®¾ç½®ï¼ˆæœ‰æ•ˆæœŸã€é˜²åˆ·æœºåˆ¶ï¼‰
- é€šçŸ¥è®¾ç½®ï¼ˆé‚®ä»¶/çŸ­ä¿¡æé†’ï¼‰
- é«˜çº§è®¾ç½®ï¼ˆæ•°æ®åº“è¿æ¥ã€APIé…ç½®ï¼‰

**æ–‡ä»¶**ï¼šæ–°å»º `settings.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š2-3å°æ—¶

---

### åŠŸèƒ½7ï¼šè´¦å·ç®¡ç†ä¼˜åŒ–

**å¾…æ·»åŠ åŠŸèƒ½**ï¼š
1. ä¿®æ”¹å¯†ç 
2. è§’è‰²æƒé™ï¼ˆadmin/editor/viewerï¼‰
3. æ“ä½œæ—¥å¿—
4. æœ€åç™»å½•æ—¶é—´

**å…³é”®ä»£ç **ï¼š
```javascript
// ä¿®æ”¹å¯†ç 
function changePassword(username) {
    const newPassword = prompt('è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰ï¼š');
    if (newPassword && newPassword.length >= 6) {
        const accounts = JSON.parse(localStorage.getItem('ybl_accounts') || '[]');
        const account = accounts.find(acc => acc.username === username);
        if (account) {
            account.password = newPassword;
            localStorage.setItem('ybl_accounts', JSON.stringify(accounts));
            alert('å¯†ç ä¿®æ”¹æˆåŠŸï¼');
        }
    }
}

// æ·»åŠ æ“ä½œæ—¥å¿—
function logAction(action, details) {
    const logs = JSON.parse(localStorage.getItem('ybl_operation_logs') || '[]');
    logs.push({
        username: getCurrentUser().username,
        action: action,
        details: details,
        timestamp: new Date().toISOString()
    });
    localStorage.setItem('ybl_operation_logs', JSON.stringify(logs));
}
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š`accounts.html`
**é¢„è®¡å·¥ä½œé‡**ï¼š2å°æ—¶

---

### åŠŸèƒ½8ï¼šé—®å·ç¼–è¾‘å™¨é«˜çº§åŠŸèƒ½

**å¾…æ·»åŠ åŠŸèƒ½**ï¼š
1. é—®é¢˜æ‹–æ‹½æ’åº
2. å¤åˆ¶é—®é¢˜
3. é—®å·æ¨¡æ¿ä¿å­˜/åŠ è½½
4. é€»è¾‘è·³è½¬è®¾ç½®

**æŠ€æœ¯æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ SortableJS å®ç°æ‹–æ‹½
- æ·»åŠ å¤åˆ¶æŒ‰é’®
- localStorage ä¿å­˜å¤šå¥—æ¨¡æ¿

**é¢„è®¡å·¥ä½œé‡**ï¼š3-4å°æ—¶

---

## ğŸ“Š åŠŸèƒ½å®Œæˆåº¦å¯¹æ¯”

| åŠŸèƒ½æ¨¡å— | å½“å‰çŠ¶æ€ | å®Œå–„åçŠ¶æ€ |
|---------|---------|-----------|
| ç™»å½•è®¤è¯ | âœ… 100% | âœ… 100% |
| æ•°æ®å¤‡ä»½ | âœ… 100% | âœ… 100% |
| é—¨åº—ç®¡ç† | 70% | â­ 90% |
| é—®å·ç¼–è¾‘ | 60% | â­ 85% |
| æ•°æ®ç»Ÿè®¡ | 50% | â­ 85% |
| åé¦ˆç®¡ç† | 40% | â­ 80% |
| è´¦å·ç®¡ç† | 40% | â­ 75% |
| äºŒç»´ç  | 75% | â­ 90% |
| **æ€»ä½“** | **55%** | **â­ 85%** |

---

## ğŸ¯ æ¨èå®æ–½é¡ºåº

### ç¬¬ä¸€é˜¶æ®µï¼ˆç«‹å³å¯åšï¼‰
1. âœ… feedbacks.html æ·»åŠ åˆ é™¤å’Œç­›é€‰ï¼ˆ1-2å°æ—¶ï¼‰
2. âœ… stores.html æ·»åŠ ç¼–è¾‘å’Œæ‰¹é‡æ·»åŠ ï¼ˆ1å°æ—¶ï¼‰

### ç¬¬äºŒé˜¶æ®µï¼ˆæ ¸å¿ƒæå‡ï¼‰
3. â­ è®©é—®å·é…ç½®ç”Ÿæ•ˆï¼ˆ2-3å°æ—¶ï¼‰
4. â­ æ·»åŠ æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼ˆ2-3å°æ—¶ï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼ˆä½“éªŒä¼˜åŒ–ï¼‰
5. ğŸ“Š äºŒç»´ç æ‰¹é‡ä¸‹è½½ï¼ˆ1-2å°æ—¶ï¼‰
6. ğŸ”§ è´¦å·ç®¡ç†ä¼˜åŒ–ï¼ˆ2å°æ—¶ï¼‰

### ç¬¬å››é˜¶æ®µï¼ˆå¯é€‰ï¼‰
7. ğŸ¨ é—®å·ç¼–è¾‘å™¨é«˜çº§åŠŸèƒ½ï¼ˆ3-4å°æ—¶ï¼‰
8. âš™ï¸ åˆ›å»ºç³»ç»Ÿè®¾ç½®é¡µé¢ï¼ˆ2-3å°æ—¶ï¼‰

---

## ğŸ’¡ å¼€å‘å»ºè®®

1. **ä¼˜å…ˆçº§ç®¡ç†**ï¼šå…ˆå®Œæˆå½±å“ç”¨æˆ·ä½“éªŒçš„åŠŸèƒ½
2. **æµ‹è¯•ä¸ºå…ˆ**ï¼šæ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½ç«‹å³æµ‹è¯•
3. **å¤‡ä»½æ•°æ®**ï¼šä¿®æ”¹å‰å…ˆç”¨ backup.html å¯¼å‡ºå¤‡ä»½
4. **é€æ­¥è¿­ä»£**ï¼šä¸è¦ä¸€æ¬¡æ€§ä¿®æ”¹å¤ªå¤šæ–‡ä»¶

---

## ğŸ“š æŠ€æœ¯å‚è€ƒ

- **Chart.js**ï¼šhttps://www.chartjs.org/
- **JSZip**ï¼šhttps://stuk.github.io/jszip/
- **SortableJS**ï¼šhttps://sortablejs.github.io/Sortable/
- **QRCode.js**ï¼šhttps://davidshimjs.github.io/qrcodejs/

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœåœ¨å®ç°è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„ä»£ç ç¤ºä¾‹
2. å‚è€ƒç°æœ‰é¡µé¢çš„å®ç°æ–¹å¼
3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è°ƒè¯•

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**ï¼š2025-11-01
**ç³»ç»Ÿç‰ˆæœ¬**ï¼šv2.0
