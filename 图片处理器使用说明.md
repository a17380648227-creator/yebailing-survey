# 图片处理器使用说明

## 功能特点

✨ **自动压缩优化** - 智能压缩图片，减小文件大小
✨ **尺寸调整** - 自动限制图片最大宽度，避免过大
✨ **批量处理** - 支持一次性处理整个文件夹的图片
✨ **格式兼容** - 支持JPG、PNG、BMP、GIF、TIFF、WebP等格式
✨ **自动安装** - 首次运行自动安装所需的Pillow库

## 快速开始

### 方法1: 交互式模式(推荐新手)

```bash
python3 图片处理器.py
```

然后按照提示操作：
1. 选择处理模式(单个文件或批量处理)
2. 输入图片路径(或直接拖拽文件/文件夹到终端)
3. 设置参数(可直接回车使用默认值)
4. 等待处理完成

### 方法2: 拖拽模式(最简单)

直接将图片文件或文件夹拖拽到`图片处理器.py`上即可！

```bash
python3 图片处理器.py /path/to/your/image.jpg
```

或批量处理：

```bash
python3 图片处理器.py /path/to/your/folder
```

## 参数说明

| 参数 | 默认值 | 说明 |
|------|--------|------|
| 最大文件大小 | 1.0 MB | 目标压缩后的文件大小 |
| 最大宽度 | 1920 像素 | 超过此宽度会自动缩小 |
| 压缩质量 | 85 | 1-100，数值越高质量越好但文件越大 |

## 使用场景

### 场景1: 处理网页用的图片
```
最大文件大小: 0.5 MB
最大宽度: 1920
压缩质量: 80
```

### 场景2: 移动端图片(更激进的压缩)
```
最大文件大小: 0.3 MB
最大宽度: 1080
压缩质量: 75
```

### 场景3: 高质量展示图片
```
最大文件大小: 2.0 MB
最大宽度: 2560
压缩质量: 90
```

## 输出说明

### 单个文件处理
- 原文件不会被修改
- 输出文件名: `原文件名_optimized.jpg`
- 保存在原文件同目录下

### 批量处理
- 所有优化后的图片保存在`optimized`子文件夹中
- 处理完成后自动在Finder中打开输出文件夹

## 示例

### 示例1: 压缩单张照片
```bash
python3 图片处理器.py
# 选择 1
# 输入路径: /Users/liuyun/Desktop/大图片.png
# 回车使用默认设置
```

### 示例2: 批量压缩相册
```bash
python3 图片处理器.py
# 选择 2
# 输入路径: /Users/liuyun/Pictures/旅游照片
# 最大文件大小: 0.5
# 最大宽度: 1080
# 压缩质量: 75
```

### 示例3: 命令行快速处理
```bash
# 处理单个文件
python3 图片处理器.py ~/Desktop/photo.jpg

# 批量处理文件夹
python3 图片处理器.py ~/Desktop/photos/
```

## 支持的图片格式

- ✓ JPEG / JPG
- ✓ PNG (会自动转换为JPG)
- ✓ BMP
- ✓ GIF
- ✓ TIFF
- ✓ WebP

## 常见问题

### Q: 首次运行提示缺少Pillow库？
A: 脚本会自动安装，如果自动安装失败，请手动执行：
```bash
pip3 install Pillow
```

### Q: 压缩后的图片还是太大？
A: 尝试降低以下参数：
- 最大文件大小设置为0.5或更小
- 最大宽度设置为1080或更小
- 压缩质量设置为70-75

### Q: 压缩后图片模糊？
A: 提高以下参数：
- 压缩质量设置为90或更高
- 最大宽度不要限制太小

### Q: 可以替换原文件吗？
A: 为了安全，默认不替换原文件。如需替换，处理后手动删除原文件，将优化后的文件重命名即可。

## 技术说明

- 使用Pillow库进行图片处理
- 采用LANCZOS算法进行高质量缩放
- PNG自动转换为JPG并去除透明通道
- 智能质量调整，确保文件大小符合要求

## 注意事项

⚠️ **首次使用前会自动安装Pillow库，需要联网**
⚠️ **批量处理大量文件可能需要较长时间**
⚠️ **建议先处理一张测试图片，确认效果后再批量处理**

## 与野百灵项目集成

如果要在`index.html`中使用优化后的图片：

1. 将图片处理到合适大小(建议 < 500KB)
2. 放入项目的`pic`文件夹
3. 在HTML中引用：
```html
<img src="pic/优化后的图片_optimized.jpg" alt="描述">
```

4. 提交到Git:
```bash
git add pic/
git commit -m "添加优化后的图片"
git push
```

这样可以确保GitHub Pages部署时图片加载快速，不会超时！
